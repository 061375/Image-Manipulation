<html>
	<head>
		<style>
			div {
				float: left;
			}
		</style>
	</head>
	<body>
		<div id="original"></div>
		<div id="target"></div>
		<script type="module">
			
			'use strict';
			
			import * as classes from '/script.js'

			const W = 500
			const H = 700
			const N = 15 // nearest color threashold
			
			// call the sub class
			let test = new classes.ReduceColors()
			// create and reference some canvases
			let i = test.canvas(document.getElementById("original"),W,H)
			let j = test.canvas(document.getElementById("target"),W,H)


			test.load(['images/cat.jpg'])
			.then(function(e){
				test.draw(i,e[0].img)
				test.loopPixels(test.getData(i),[{
					f:test.nearestPixel,
					params:{
						i:j,
						l:N,
						ctx:test._ctx
					}
				},{
					f:test.reduceColor,
					params:{
						f:10
					}
				}]).then(function(p) {
					test.drawBuffer(p,j)
				})
				
			})
			
		</script>
	</body>
</html>